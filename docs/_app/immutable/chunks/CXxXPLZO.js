import{W as b,X as q,Y as D,Z as E,_ as N,$ as d,a0 as B,K as O,a1 as Y,a2 as x,x as h,a3 as y,N as I,R as z,a4 as m,a5 as K,a6 as k,a7 as L,a8 as W,a9 as H,aa as M,ab as S,n as _,a as U,ac as V,ad as X}from"./GWlgZKUi.js";function C(s,e){var n={f:0,v:s,reactions:null,equals:Y,rv:0,wv:0};return n}function P(s){return Z(C(s))}function Q(s,e=!1){const n=C(s);return e||(n.equals=O),n}function Z(s){return b!==null&&!q&&b.f&E&&(d===null?S([s]):d.push(s)),s}function ss(s,e){return b!==null&&!q&&D()&&b.f&(E|N)&&(d===null||!d.includes(s))&&B(),$(s,e)}function $(s,e){return s.equals(e)||(s.v,s.v=e,s.wv=x(),F(s,k),h!==null&&h.f&y&&!(h.f&(I|z))&&(m===null?K([s]):m.push(s))),e}function F(s,e){var n=s.reactions;if(n!==null)for(var t=n.length,r=0;r<t;r++){var u=n[r],f=u.f;f&k||(L(u,e),f&(y|W)&&(f&E?F(u,H):M(u)))}}function R(s,e,n){if(s==null)return e(void 0),n&&n(void 0),_;const t=U(()=>s.subscribe(e,n));return t.unsubscribe?()=>t.unsubscribe():t}const o=[];function j(s,e){return{subscribe:G(s,e).subscribe}}function G(s,e=_){let n=null;const t=new Set;function r(i){if(V(s,i)&&(s=i,n)){const c=!o.length;for(const a of t)a[1](),o.push(a,s);if(c){for(let a=0;a<o.length;a+=2)o[a][0](o[a+1]);o.length=0}}}function u(i){r(i(s))}function f(i,c=_){const a=[i,c];return t.add(a),t.size===1&&(n=e(r,u)||_),i(s),()=>{t.delete(a),t.size===0&&n&&(n(),n=null)}}return{set:r,update:u,subscribe:f}}function es(s,e,n){const t=!Array.isArray(s),r=t?[s]:s;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const u=e.length<2;return j(n,(f,i)=>{let c=!1;const a=[];let p=0,v=_;const w=()=>{if(p)return;v();const l=e(t?a[0]:a,f,i);u?f(l):v=typeof l=="function"?l:_},T=r.map((l,g)=>R(l,A=>{a[g]=A,p&=~(1<<g),c&&w()},()=>{p|=1<<g}));return c=!0,w(),function(){X(T),v(),c=!1}})}function ns(s){let e;return R(s,n=>e=n)(),e}export{ss as a,R as b,P as c,es as d,ns as g,$ as i,Q as m,C as s,G as w};
